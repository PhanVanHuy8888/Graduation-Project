<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>EcoPharm</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.3/assets/owl.carousel.min.css" />

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css" />

    <!-- fonts style -->
    <link href="https://fonts.googleapis.com/css?family=Baloo+Chettan|Dosis:400,600,700|Poppins:400,600,700&display=swap" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="/css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="/css/responsive.css" rel="stylesheet" />
</head>
<body>
<div class="main_body_content">
    <div th:include="static/header :: header"></div>
    <section class="py-5">
        <div class="container px-4 px-lg-5 my-5">
            <div id="detailMedicine" class="row gx-4 gx-lg-5 align-items-center">

            </div>
        </div>
    </section>
    <section class="py-5 bg-light">
        <div class="container px-4 px-lg-5 mt-5">
            <h2 class="fw-bolder mb-4">Sản phẩm tương tự</h2>
            <div id="medicineContainers"
                 class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">

            </div>
            <div class="mt-4 mb-5 text-center" id="paginationContainer"></div>
        </div>
    </section>
    <div th:include="static/footer :: footer"></div>
</div>

<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/bootstrap.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.9/slick.min.js"></script>
<script src="js/custom.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.umd.min.js"></script>
<script src="/js/medicine.js"></script>

<!--<div id="customAlert">Thêm vào giỏ hàng thành công !!</div>-->
<script>
    async function fetchCategory() {
        console.log("fetchCategory function is called!"); // Log kiểm tra

        try {
            const response = await fetch("http://localhost:8080/api/categories");
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const data = await response.json();
            console.log("Fetched categories:", data); // Kiểm tra dữ liệu trả về

            const categoryList = document.getElementById("categoryList");
            if (!categoryList) {
                console.error("Element #categoryList not found!");
                return;
            }

            categoryList.innerHTML = ""; // Xóa danh sách cũ

            data.forEach(category => {
                const listItem = document.createElement("li");
                listItem.classList.add("nav-item");

                listItem.innerHTML = `
                    <a class="nav-link" href="/${category.url}">
                        ${category.categoryName}
                    </a>
                `;

                categoryList.appendChild(listItem);
            });

            console.log("Categories rendered successfully!");
        } catch (error) {
            console.error("Error fetching categories:", error);
        }
    }

    window.onload = function () {
        fetchCategory();
    };
</script>
</body>
</html>
