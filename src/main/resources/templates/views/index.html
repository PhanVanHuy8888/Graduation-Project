<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>EcoPharm</title>

    <!-- slider stylesheet -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.1.3/assets/owl.carousel.min.css" />

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.css" />

    <!-- fonts style -->
    <link href="https://fonts.googleapis.com/css?family=Baloo+Chettan|Dosis:400,600,700|Poppins:400,600,700&display=swap" rel="stylesheet" />
    <!-- Custom styles for this template -->
    <link href="/css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="/css/responsive.css" rel="stylesheet" />
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
            rel="stylesheet"
    />

</head>

<body>
<!-- header section -->
<div th:include="static/header :: header"></div>

<!-- shop section -->
<section class="shop_section layout_padding">
    <input type="hidden" id="userId" th:value="${userId}">
    <div class="container">
        <div class="box">
            <div class="detail-box">
                <h2>
                    EcoPharm shop
                </h2>
                <p>
                    EcoPharm - Sức khỏe xanh, cuộc sống lành
                </p>
            </div>
            <div class="img-box">
                <img src="images/shop-image.png" alt="">
            </div>
            <div class="btn-box">
                <a href="/medicine">
                    Buy Now
                </a>
            </div>
        </div>
    </div>
</section>

<!-- end shop section -->

<!-- about section -->

<section class="about_section">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6 px-0">
                <div class="img-box">
                    <img src="images/m-4.jpg" alt="">
                </div>
            </div>
            <div class="col-md-5">
                <div class="detail-box">
                    <div class="heading_container">
                        <hr>
                        <h2>
                            Về EcoPharm
                        </h2>
                    </div>
                    <p>
                        Nơi chăm sóc sức khỏe của bạn với những sản phẩm chất lượng, an toàn và đáng tin cậy. Chúng tôi cam kết mang đến giải pháp y tế tốt nhất cho mọi gia đình
                    </p>
                    <a href="/article">
                        Đọc thêm
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- end about section -->

<!-- fruit section -->

<section class="fruit_section layout_padding">
    <div class="container">
        <div class="heading_container">
            <hr>
            <h2>
                Các sản phẩm
            </h2>
        </div>
    </div>
    <div class="container-fluid">
        <div class="text-center container py-5">
            <div class="row" id="medicineContainer">
            </div>
        </div>
        <div class="mt-4 mb-5 text-center" id="paginationContainer"></div>
    </div>
</section>

<!-- end fruit section -->


<!-- footer section -->
<div th:include="static/footer :: footer"></div>



<script type="text/javascript" src="/js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="/js/bootstrap.js"></script>
<script type="text/javascript" src="/js/custom.js"></script>
<script src="/js/medicine.js"></script>
<script>
    async function fetchCategory() {
        console.log("fetchCategory function is called!"); // Log kiểm tra

        try {
            const response = await fetch("http://localhost:8080/api/categories");
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const data = await response.json();
            console.log("Fetched categories:", data); // Kiểm tra dữ liệu trả về

            const categoryList = document.getElementById("categoryList");
            if (!categoryList) {
                console.error("Element #categoryList not found!");
                return;
            }

            categoryList.innerHTML = ""; // Xóa danh sách cũ

            data.forEach(category => {
                const listItem = document.createElement("li");
                listItem.classList.add("nav-item");

                listItem.innerHTML = `
                    <a class="nav-link" href="/${category.url}">
                        ${category.categoryName}
                    </a>
                `;

                categoryList.appendChild(listItem);
            });

            console.log("Categories rendered successfully!");
        } catch (error) {
            console.error("Error fetching categories:", error);
        }
    }

    window.onload = function () {
        fetchCategory();
    };

    function logout() {
        // Xóa userId khỏi localStorage
        localStorage.removeItem("userId");
    }
</script>
</body>

</html>