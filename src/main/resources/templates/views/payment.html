
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Thanh ToÃ¡n ÄÆ¡n HÃ ng</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-5">
  <div class="card p-4 shadow">
    <h4 class="mb-3">ğŸ” Vui lÃ²ng quÃ©t mÃ£ QR Ä‘á»ƒ xÃ¡c nháº­n thanh toÃ¡n</h4>

    <p><strong>Sá»‘ tiá»n cáº§n thanh toÃ¡n:</strong> <span id="amount" class="text-danger font-weight-bold"></span> VND</p>

    <img id="qrImage" width="200" class="mb-3" alt="QR Code">

    <p class="text-muted">â³ Äang chá» xÃ¡c nháº­n thanh toÃ¡n...</p>
  </div>
</div>

<script>
  const params = new URLSearchParams(window.location.search);
  const orderId = params.get('orderId');
  const price = params.get('price');

  // Hiá»ƒn thá»‹ sá»‘ tiá»n
  document.getElementById('amount').innerText = price;

  // Táº¡o link Ä‘áº¿n trang xÃ¡c nháº­n thanh toÃ¡n (quÃ©t báº±ng Ä‘iá»‡n thoáº¡i)
  const confirmUrl = `http://192.168.1.204:8080/payment-confirm?orderId=${orderId}&price=${price}`;
  const qrImageUrl = `https://api.qrserver.com/v1/create-qr-code/?data=${encodeURIComponent(confirmUrl)}`;

  document.getElementById('qrImage').src = qrImageUrl;

  // Poll má»—i 3 giÃ¢y Ä‘á»ƒ kiá»ƒm tra tráº¡ng thÃ¡i thanh toÃ¡n
  setTimeout(() => {
    window.location.href = 'success';
  }, 20000);
</script>
</body>
</html>

